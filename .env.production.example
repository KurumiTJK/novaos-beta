# ═══════════════════════════════════════════════════════════════════════════════
# NovaOS — Production Environment Variables
# ═══════════════════════════════════════════════════════════════════════════════
#
# Copy to .env.production and fill in your values:
#   cp .env.production.example .env.production
#
# ⚠️  NEVER commit .env.production to version control
#
# ═══════════════════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────────────────────
# SERVER (set by docker-compose, don't change)
# ─────────────────────────────────────────────────────────────────────────────────
PORT=3000
NODE_ENV=production
TRUST_PROXY=true
SHUTDOWN_TIMEOUT_MS=30000

# ─────────────────────────────────────────────────────────────────────────────────
# CORS — Your domain(s)
# ─────────────────────────────────────────────────────────────────────────────────
CORS_ORIGINS=https://yourdomain.com
CORS_ALLOW_CREDENTIALS=true

# ─────────────────────────────────────────────────────────────────────────────────
# AUTHENTICATION
# ─────────────────────────────────────────────────────────────────────────────────
# Generate secret: openssl rand -base64 32
JWT_SECRET=REPLACE_WITH_YOUR_SECRET_MIN_32_CHARS
JWT_ISSUER=novaos
JWT_AUDIENCE=novaos-api
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d
AUTH_REQUIRED=true

# ─────────────────────────────────────────────────────────────────────────────────
# OPENAI (Required)
# Get key: https://platform.openai.com/api-keys
# ─────────────────────────────────────────────────────────────────────────────────
OPENAI_API_KEY=sk-proj-xxx
OPENAI_MODEL_PIPELINE=gpt-4o-mini
OPENAI_MODEL_GENERATION=gpt-4o

# ─────────────────────────────────────────────────────────────────────────────────
# GEMINI (Required for grounded search + SwordGate)
# Get key: https://aistudio.google.com/app/apikey
# ─────────────────────────────────────────────────────────────────────────────────
GEMINI_API_KEY=xxx
GEMINI_MODEL=gemini-2.0-flash
SWORDGATE_LLM_MODEL=gemini-2.5-pro-preview-05-06
SWORDGATE_LLM_THINKING_LEVEL=high

# ─────────────────────────────────────────────────────────────────────────────────
# REDIS (Required)
# Get free: https://upstash.com
# Use rediss:// (double s) for TLS
# ─────────────────────────────────────────────────────────────────────────────────
REDIS_URL=rediss://default:xxx@xxx-region.upstash.io:6379

# ─────────────────────────────────────────────────────────────────────────────────
# SUPABASE (Required)
# Get free: https://supabase.com
# Find in: Dashboard → Settings → API
# ─────────────────────────────────────────────────────────────────────────────────
SUPABASE_URL=https://xxx.supabase.co
SUPABASE_SERVICE_KEY=eyJxxx

# ─────────────────────────────────────────────────────────────────────────────────
# GOOGLE APIS (Optional - for lesson resources)
# Setup: https://console.cloud.google.com/apis/credentials
# Enable: Custom Search API + YouTube Data API v3
# ─────────────────────────────────────────────────────────────────────────────────
GOOGLE_API_KEY=
GOOGLE_SEARCH_ENGINE_ID=
YOUTUBE_API_KEY=

# ─────────────────────────────────────────────────────────────────────────────────
# n8n (Optional - for Modules & Actions)
# ─────────────────────────────────────────────────────────────────────────────────
N8N_WEBHOOK_BASE_URL=
N8N_HMAC_SECRET=

# ─────────────────────────────────────────────────────────────────────────────────
# SECURITY
# ─────────────────────────────────────────────────────────────────────────────────
BRUTE_FORCE_MAX_ATTEMPTS=5
BRUTE_FORCE_LOCKOUT_MINUTES=15
RATE_LIMIT_AUTH=10
RATE_LIMIT_CHAT=20
RATE_LIMIT_API=100

# ─────────────────────────────────────────────────────────────────────────────────
# OBSERVABILITY (Optional but recommended)
# Get DSN: https://sentry.io
# ─────────────────────────────────────────────────────────────────────────────────
SENTRY_DSN=

# ─────────────────────────────────────────────────────────────────────────────────
# PRODUCTION FLAGS (don't change)
# ─────────────────────────────────────────────────────────────────────────────────
DEBUG_MODE=false
REDACT_PII=true
VERIFICATION_ENABLED=true
VERIFICATION_REQUIRED=false
WEB_FETCH_ENABLED=true
WEB_FETCH_MAX_SIZE_BYTES=1048576
WEB_FETCH_TIMEOUT_MS=10000

# Debug flags (keep false in production)
DEBUG_INTENT_GATE=false
DEBUG_SHIELD_GATE=false
DEBUG_RESPONSE_GATE=false
DEBUG_CONSTITUTION_GATE=false
DEBUG_CAPABILITY_GATE=false
